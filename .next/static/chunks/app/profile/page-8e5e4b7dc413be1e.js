(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[636],{968:(e,s,a)=>{"use strict";a.d(s,{b:()=>i});var t=a(2115),r=a(3655),l=a(5155),n=t.forwardRef((e,s)=>(0,l.jsx)(r.sG.label,{...e,ref:s,onMouseDown:s=>{var a;s.target.closest("button, input, select, textarea")||(null===(a=e.onMouseDown)||void 0===a||a.call(e,s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));n.displayName="Label";var i=n},1007:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},1052:(e,s,a)=>{Promise.resolve().then(a.bind(a,8591))},3109:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},3717:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},4229:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},4416:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},4516:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},5525:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},5670:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]])},5977:(e,s,a)=>{"use strict";a.d(s,{H4:()=>N,_V:()=>g,bL:()=>v});var t=a(2115),r=a(6081),l=a(9033),n=a(2712),i=a(3655),c=a(5155),d="Avatar",[o,u]=(0,r.A)(d),[m,h]=o(d),x=t.forwardRef((e,s)=>{let{__scopeAvatar:a,...r}=e,[l,n]=t.useState("idle");return(0,c.jsx)(m,{scope:a,imageLoadingStatus:l,onImageLoadingStatusChange:n,children:(0,c.jsx)(i.sG.span,{...r,ref:s})})});x.displayName=d;var p="AvatarImage",f=t.forwardRef((e,s)=>{let{__scopeAvatar:a,src:r,onLoadingStatusChange:d=()=>{},...o}=e,u=h(p,a),m=function(e,s){let[a,r]=t.useState("idle");return(0,n.N)(()=>{if(!e){r("error");return}let a=!0,t=new window.Image,l=e=>()=>{a&&r(e)};return r("loading"),t.onload=l("loaded"),t.onerror=l("error"),t.src=e,s&&(t.referrerPolicy=s),()=>{a=!1}},[e,s]),a}(r,o.referrerPolicy),x=(0,l.c)(e=>{d(e),u.onImageLoadingStatusChange(e)});return(0,n.N)(()=>{"idle"!==m&&x(m)},[m,x]),"loaded"===m?(0,c.jsx)(i.sG.img,{...o,ref:s,src:r}):null});f.displayName=p;var y="AvatarFallback",j=t.forwardRef((e,s)=>{let{__scopeAvatar:a,delayMs:r,...l}=e,n=h(y,a),[d,o]=t.useState(void 0===r);return t.useEffect(()=>{if(void 0!==r){let e=window.setTimeout(()=>o(!0),r);return()=>window.clearTimeout(e)}},[r]),d&&"loaded"!==n.imageLoadingStatus?(0,c.jsx)(i.sG.span,{...l,ref:s}):null});j.displayName=y;var v=x,g=f,N=j},6037:(e,s,a)=>{"use strict";a.d(s,{w:()=>i});var t=a(5155),r=a(2115),l=a(7489),n=a(3999);let i=r.forwardRef((e,s)=>{let{className:a,orientation:r="horizontal",decorative:i=!0,...c}=e;return(0,t.jsx)(l.b,{ref:s,decorative:i,orientation:r,className:(0,n.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",a),...c})});i.displayName=l.b.displayName},7489:(e,s,a)=>{"use strict";a.d(s,{b:()=>d});var t=a(2115),r=a(3655),l=a(5155),n="horizontal",i=["horizontal","vertical"],c=t.forwardRef((e,s)=>{var a;let{decorative:t,orientation:c=n,...d}=e,o=(a=c,i.includes(a))?c:n;return(0,l.jsx)(r.sG.div,{"data-orientation":o,...t?{role:"none"}:{"aria-orientation":"vertical"===o?o:void 0,role:"separator"},...d,ref:s})});c.displayName="Separator";var d=c},7580:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},8145:(e,s,a)=>{"use strict";a.d(s,{E:()=>i});var t=a(5155);a(2115);var r=a(2085),l=a(3999);let n=(0,r.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:s,variant:a,...r}=e;return(0,t.jsx)("div",{className:(0,l.cn)(n({variant:a}),s),...r})}},8591:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>S});var t=a(5155),r=a(2115),l=a(8482),n=a(7168),i=a(9852),c=a(2714),d=a(5784),o=a(9026),u=a(9663),m=a(8145),h=a(6037),x=a(9397),p=a(3717),f=a(4229),y=a(4416),j=a(9074),v=a(1007),g=a(8883),N=a(9420),b=a(4516),w=a(5525),k=a(5670),A=a(7580),C=a(3109),_=a(9350),M=a(1886);function S(){var e;let{user:s}=(0,_.A)(),[a,S]=(0,r.useState)(!1),[R,P]=(0,r.useState)(!1),[H,L]=(0,r.useState)(""),[D,V]=(0,r.useState)(""),[I,E]=(0,r.useState)({username:"",email:"",phone_number:"",county:"",sub_county:"",user_type:""}),[F,z]=(0,r.useState)({totalScreenings:0,patientsRegistered:0,highRiskDetected:0,referralsMade:0});(0,r.useEffect)(()=>{s&&(E({username:s.username||"",email:s.email||"",phone_number:s.phone_number||"",county:s.county||"",sub_county:s.sub_county||"",user_type:s.user_type||""}),q())},[s]);let q=async()=>{try{z({totalScreenings:156,patientsRegistered:89,highRiskDetected:12,referralsMade:8})}catch(e){console.error("Failed to fetch user stats:",e)}},T=(e,s)=>{E(a=>({...a,[e]:s}))},U=async()=>{P(!0),L(""),V("");try{await M.u.updateProfile(I),V("Profile updated successfully!"),S(!1)}catch(e){L(e.message||"Failed to update profile")}finally{P(!1)}};return s?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"Profile"}),a?(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsxs)(n.$,{onClick:U,disabled:R,children:[(0,t.jsx)(f.A,{className:"h-4 w-4 mr-2"}),R?"Saving...":"Save"]}),(0,t.jsxs)(n.$,{variant:"outline",onClick:()=>{s&&E({username:s.username||"",email:s.email||"",phone_number:s.phone_number||"",county:s.county||"",sub_county:s.sub_county||"",user_type:s.user_type||""}),S(!1),L("")},children:[(0,t.jsx)(y.A,{className:"h-4 w-4 mr-2"}),"Cancel"]})]}):(0,t.jsxs)(n.$,{onClick:()=>S(!0),className:"bg-blue-600 hover:bg-blue-700",children:[(0,t.jsx)(p.A,{className:"h-4 w-4 mr-2"}),"Edit Profile"]})]}),H&&(0,t.jsx)(o.Fc,{variant:"destructive",children:(0,t.jsx)(o.TN,{children:H})}),D&&(0,t.jsx)(o.Fc,{className:"border-green-200 bg-green-50 dark:border-green-800 dark:bg-green-900/20",children:(0,t.jsx)(o.TN,{className:"text-green-700 dark:text-green-400",children:D})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsxs)(l.Zp,{className:"lg:col-span-2",children:[(0,t.jsxs)(l.aR,{children:[(0,t.jsx)(l.ZB,{children:"Personal Information"}),(0,t.jsx)(l.BT,{children:"Manage your account details and preferences"})]}),(0,t.jsxs)(l.Wu,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)(u.eu,{className:"h-20 w-20",children:(0,t.jsx)(u.q5,{className:"text-lg bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:(null===(e=s.username)||void 0===e?void 0:e.charAt(0).toUpperCase())||"U"})}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h3",{className:"text-xl font-semibold",children:s.username}),(0,t.jsx)(m.E,{className:(e=>{switch(e){case"ADMIN":return"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200";case"CLINICIAN":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"CHV":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}})(s.user_type),children:"CHV"===s.user_type?"Community Health Volunteer":s.user_type}),(0,t.jsxs)("div",{className:"flex items-center text-sm text-muted-foreground",children:[(0,t.jsx)(j.A,{className:"h-4 w-4 mr-1"}),"Member since ",new Date(s.created_at).toLocaleDateString()]})]})]}),(0,t.jsx)(h.w,{}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(c.J,{htmlFor:"username",children:"Username"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(v.A,{className:"absolute left-3 top-2.5 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(i.p,{id:"username",value:I.username,onChange:e=>T("username",e.target.value),disabled:!a,className:"pl-10"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c.J,{htmlFor:"email",children:"Email"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(g.A,{className:"absolute left-3 top-2.5 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(i.p,{id:"email",type:"email",value:I.email,onChange:e=>T("email",e.target.value),disabled:!a,className:"pl-10"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c.J,{htmlFor:"phone",children:"Phone Number"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(N.A,{className:"absolute left-3 top-2.5 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(i.p,{id:"phone",value:I.phone_number,onChange:e=>T("phone_number",e.target.value),disabled:!a,className:"pl-10",placeholder:"+254712345678"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c.J,{htmlFor:"userType",children:"User Type"}),(0,t.jsxs)(d.l6,{value:I.user_type,onValueChange:e=>T("user_type",e),disabled:!a,children:[(0,t.jsx)(d.bq,{children:(0,t.jsx)(d.yv,{placeholder:"Select user type"})}),(0,t.jsxs)(d.gC,{children:[(0,t.jsx)(d.eb,{value:"CHV",children:"Community Health Volunteer"}),(0,t.jsx)(d.eb,{value:"CLINICIAN",children:"Clinician"}),(0,t.jsx)(d.eb,{value:"ADMIN",children:"Administrator"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c.J,{htmlFor:"county",children:"County"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(b.A,{className:"absolute left-3 top-2.5 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(i.p,{id:"county",value:I.county,onChange:e=>T("county",e.target.value),disabled:!a,className:"pl-10"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c.J,{htmlFor:"subCounty",children:"Sub-County"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(b.A,{className:"absolute left-3 top-2.5 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(i.p,{id:"subCounty",value:I.sub_county,onChange:e=>T("sub_county",e.target.value),disabled:!a,className:"pl-10"})]})]})]})]})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsxs)(l.ZB,{className:"flex items-center",children:[(0,t.jsx)(w.A,{className:"h-5 w-5 mr-2"}),"Account Status"]})}),(0,t.jsxs)(l.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm",children:"Account Status"}),(0,t.jsx)(m.E,{className:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:s.is_active?"Active":"Inactive"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm",children:"Email Verified"}),(0,t.jsx)(m.E,{className:s.is_verified?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",children:s.is_verified?"Verified":"Pending"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm",children:"Last Updated"}),(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:new Date(s.updated_at).toLocaleDateString()})]})]})]}),(0,t.jsxs)(l.Zp,{children:[(0,t.jsxs)(l.aR,{children:[(0,t.jsx)(l.ZB,{children:"Your Statistics"}),(0,t.jsx)(l.BT,{children:"Your contribution to the MAMA-SCAN platform"})]}),(0,t.jsxs)(l.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(k.A,{className:"h-4 w-4 mr-2 text-blue-600"}),(0,t.jsx)("span",{className:"text-sm",children:"Screenings Conducted"})]}),(0,t.jsx)("span",{className:"font-semibold",children:F.totalScreenings})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(A.A,{className:"h-4 w-4 mr-2 text-green-600"}),(0,t.jsx)("span",{className:"text-sm",children:"Patients Registered"})]}),(0,t.jsx)("span",{className:"font-semibold",children:F.patientsRegistered})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(x.A,{className:"h-4 w-4 mr-2 text-red-600"}),(0,t.jsx)("span",{className:"text-sm",children:"High Risk Detected"})]}),(0,t.jsx)("span",{className:"font-semibold",children:F.highRiskDetected})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(C.A,{className:"h-4 w-4 mr-2 text-orange-600"}),(0,t.jsx)("span",{className:"text-sm",children:"Referrals Made"})]}),(0,t.jsx)("span",{className:"font-semibold",children:F.referralsMade})]})]})]}),(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsx)(l.ZB,{children:"Quick Actions"})}),(0,t.jsxs)(l.Wu,{className:"space-y-2",children:[(0,t.jsxs)(n.$,{variant:"outline",className:"w-full justify-start",children:[(0,t.jsx)(w.A,{className:"h-4 w-4 mr-2"}),"Change Password"]}),(0,t.jsxs)(n.$,{variant:"outline",className:"w-full justify-start",children:[(0,t.jsx)(g.A,{className:"h-4 w-4 mr-2"}),"Email Preferences"]}),(0,t.jsxs)(n.$,{variant:"outline",className:"w-full justify-start",children:[(0,t.jsx)(x.A,{className:"h-4 w-4 mr-2"}),"Download Data"]})]})]})]})]})]}):(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(x.A,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),(0,t.jsx)("p",{children:"Loading profile..."})]})})}},8883:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},9074:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},9397:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]])},9420:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},9663:(e,s,a)=>{"use strict";a.d(s,{eu:()=>i,q5:()=>c});var t=a(5155),r=a(2115),l=a(5977),n=a(3999);let i=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.bL,{ref:s,className:(0,n.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...r})});i.displayName=l.bL.displayName,r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l._V,{ref:s,className:(0,n.cn)("aspect-square h-full w-full",a),...r})}).displayName=l._V.displayName;let c=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.H4,{ref:s,className:(0,n.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...r})});c.displayName=l.H4.displayName}},e=>{var s=s=>e(e.s=s);e.O(0,[455,737,355,834,441,684,358],()=>s(1052)),_N_E=e.O()}]);