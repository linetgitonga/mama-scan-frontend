(()=>{var e={};e.id=974,e.ids=[974],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},5553:(e,s,t)=>{Promise.resolve().then(t.bind(t,26527))},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},26527:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>k});var a=t(60687),r=t(43210),n=t(55192),l=t(24934),i=t(59821),d=t(57769),c=t(58559),o=t(43649),m=t(41312),x=t(93508),u=t(25541),h=t(96474),p=t(99270),f=t(98492),g=t(97992),j=t(68988),v=t(21650),N=t(59556),b=t(16189),y=t(85814),w=t.n(y);function k(){let[e,s]=(0,r.useState)(""),[t,y]=(0,r.useState)([]),[k,A]=(0,r.useState)([]),[S,C]=(0,r.useState)(!0),[P,_]=(0,r.useState)(""),{user:R,isLoading:M}=(0,v.A)();(0,b.useRouter)();let D=async()=>{try{C(!0);let[e,s]=await Promise.all([N.u.getPatients(),N.u.getScreenings()]);y(e.results||[]),A(s.results||[])}catch(e){_(e.message||"Failed to fetch dashboard data"),console.error("Dashboard data fetch error:",e)}finally{C(!1)}};if(M||S)return(0,a.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(c.A,{className:"h-8 w-8 text-primary animate-spin mx-auto mb-4"}),(0,a.jsx)("p",{children:"Loading dashboard..."})]})});if(P)return(0,a.jsx)("div",{className:"min-h-screen mybackground flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(o.A,{className:"h-8 w-8 text-red-500 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-red-600",children:P}),(0,a.jsx)(l.$,{onClick:D,className:"mt-4",children:"Retry"})]})});let T=t.length,E=k.filter(e=>new Date(e.screening_date).toDateString()===new Date().toDateString()).length,$=k.filter(e=>"HIGH"===e.risk_level).length,L=k.filter(e=>e.referral_needed&&(!e.risk_level||"HIGH"===e.risk_level)).length,I=[{title:"Total Patients",value:T.toString(),change:"+12%",icon:m.A,color:"text-blue-600"},{title:"Screened Today",value:E.toString(),change:"+5%",icon:x.A,color:"text-green-600"},{title:"High Risk Cases",value:$.toString(),change:"+8%",icon:o.A,color:"text-red-600"},{title:"Referrals Pending",value:L.toString(),change:"-3%",icon:u.A,color:"text-orange-600"}],Z=t.sort((e,s)=>new Date(s.created_at).getTime()-new Date(e.created_at).getTime()).slice(0,5).map(e=>{let s=k.filter(s=>s.patient===e.id).sort((e,s)=>new Date(s.screening_date).getTime()-new Date(e.screening_date).getTime())[0];return{id:e.id.toString(),name:`${e.first_name} ${e.last_name}`,age:new Date().getFullYear()-new Date(e.date_of_birth).getFullYear(),riskLevel:s?.risk_level||"Unknown",lastScreening:s?.screening_date||"Never",location:`${e.county}, ${e.sub_county}`}}),O=e=>{switch(e){case"High":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"Moderate":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"Low":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}},q=new Date,H=q.getMonth(),B=q.getFullYear(),G=k.filter(e=>{let s=new Date(e.screening_date);return s.getMonth()===H&&s.getFullYear()===B}),F=G.length,U=G.filter(e=>"HIGH"===e.risk_level).length,W=G.filter(e=>e.referral_needed).length;return(0,a.jsx)("div",{className:"min-h-screen mybackground",children:(0,a.jsxs)("div",{className:"container mybackground mx-auto px-4 py-6",children:[(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row mybackground gap-4 items-start sm:items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Dashboard Overview"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(w(),{href:"/patients/new",children:(0,a.jsxs)(l.$,{className:"bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white",children:[(0,a.jsx)(h.A,{className:"h-4 w-4 mr-2"}),"New Patient"]})}),(0,a.jsx)(w(),{href:"/screening/new",children:(0,a.jsxs)(l.$,{variant:"outline",children:[(0,a.jsx)(x.A,{className:"h-4 w-4 mr-2"}),"Start Screening"]})})]})]})}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:I.map((e,s)=>{let t=e.icon;return(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(n.ZB,{className:"text-sm font-medium",children:e.title}),(0,a.jsx)(t,{className:`h-4 w-4 ${e.color}`})]}),(0,a.jsxs)(n.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:e.value}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(0,a.jsx)("span",{className:e.change.startsWith("+")?"text-green-600":"text-red-600",children:e.change})," ","from last month"]})]})]},s)})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)(n.Zp,{className:"lg:col-span-2",children:[(0,a.jsx)(n.aR,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(n.ZB,{children:"Recent Patients"}),(0,a.jsx)(n.BT,{children:"Latest screening activities"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(p.A,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(j.p,{placeholder:"Search patients...",value:e,onChange:e=>s(e.target.value),className:"pl-8 w-64"})]}),(0,a.jsx)(l.$,{variant:"outline",size:"icon",children:(0,a.jsx)(f.A,{className:"h-4 w-4"})})]})]})}),(0,a.jsxs)(n.Wu,{children:[(0,a.jsx)("div",{className:"space-y-4",children:Z.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-sm font-medium",children:e.name.split(" ").map(e=>e[0]).join("")})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:e.name}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[(0,a.jsxs)("span",{children:["Age: ",e.age]}),(0,a.jsx)("span",{children:"â€¢"}),(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)(g.A,{className:"h-3 w-3 mr-1"}),e.location]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)(i.E,{className:O(e.riskLevel),children:[e.riskLevel," Risk"]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Last Screening"}),(0,a.jsx)("p",{className:"text-sm font-medium",children:"Never"===e.lastScreening?"Never":new Date(e.lastScreening).toLocaleDateString()})]})]})]},e.id))}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)(w(),{href:"/patients",children:(0,a.jsx)(l.$,{variant:"outline",className:"w-full",children:"View All Patients"})})})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsx)(n.ZB,{className:"text-lg",children:"Monthly Progress"}),(0,a.jsxs)(n.BT,{children:["Screening targets for ",q.toLocaleString("default",{month:"long",year:"numeric"})]})]}),(0,a.jsxs)(n.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm mb-2",children:[(0,a.jsx)("span",{children:"Screenings Completed"}),(0,a.jsxs)("span",{children:[F,"/",200]})]}),(0,a.jsx)(d.k,{value:Math.round(F/200*100),className:"h-2"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm mb-2",children:[(0,a.jsx)("span",{children:"High-Risk Identified"}),(0,a.jsxs)("span",{children:[U,"/",50]})]}),(0,a.jsx)(d.k,{value:Math.round(U/50*100),className:"h-2"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm mb-2",children:[(0,a.jsx)("span",{children:"Referrals Completed"}),(0,a.jsxs)("span",{children:[W,"/",47]})]}),(0,a.jsx)(d.k,{value:Math.round(W/47*100),className:"h-2"})]})]})]}),(0,a.jsxs)(n.Zp,{children:[(0,a.jsx)(n.aR,{children:(0,a.jsx)(n.ZB,{className:"text-lg",children:"Quick Actions"})}),(0,a.jsxs)(n.Wu,{className:"space-y-3",children:[(0,a.jsx)(w(),{href:"/screening/new",className:"block",children:(0,a.jsxs)(l.$,{variant:"outline",className:"w-full justify-start",children:[(0,a.jsx)(x.A,{className:"h-4 w-4 mr-2"}),"Start New Screening"]})}),(0,a.jsx)(w(),{href:"/patients",className:"block",children:(0,a.jsxs)(l.$,{variant:"outline",className:"w-full justify-start",children:[(0,a.jsx)(m.A,{className:"h-4 w-4 mr-2"}),"Manage Patients"]})}),(0,a.jsx)(w(),{href:"/referrals",className:"block",children:(0,a.jsxs)(l.$,{variant:"outline",className:"w-full justify-start",children:[(0,a.jsx)(u.A,{className:"h-4 w-4 mr-2"}),"View Referrals"]})}),(0,a.jsx)(w(),{href:"/analytics",className:"block",children:(0,a.jsxs)(l.$,{variant:"outline",className:"w-full justify-start",children:[(0,a.jsx)(c.A,{className:"h-4 w-4 mr-2"}),"Analytics"]})})]})]}),(0,a.jsxs)(n.Zp,{children:[(0,a.jsx)(n.aR,{children:(0,a.jsx)(n.ZB,{className:"text-lg",children:"System Status"})}),(0,a.jsxs)(n.Wu,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm",children:"AI Model"}),(0,a.jsx)(i.E,{className:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:"Online"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm",children:"Data Sync"}),(0,a.jsx)(i.E,{className:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:"Synced"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm",children:"Offline Mode"}),(0,a.jsx)(i.E,{className:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:"Available"})]})]})]})]})]})]})})}},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},40401:(e,s,t)=>{Promise.resolve().then(t.bind(t,90597))},43649:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(62688).A)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},50921:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>m,pages:()=>o,routeModule:()=>x,tree:()=>c});var a=t(65239),r=t(48088),n=t(88170),l=t.n(n),i=t(30893),d={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);t.d(s,d);let c=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,90597)),"C:\\Users\\LINET\\Desktop\\PROJECTS\\MAMASCAN\\mama-scan-frontend\\app\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,58014)),"C:\\Users\\LINET\\Desktop\\PROJECTS\\MAMASCAN\\mama-scan-frontend\\app\\layout.tsx"],loading:[()=>Promise.resolve().then(t.bind(t,99766)),"C:\\Users\\LINET\\Desktop\\PROJECTS\\MAMASCAN\\mama-scan-frontend\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"]}],o=["C:\\Users\\LINET\\Desktop\\PROJECTS\\MAMASCAN\\mama-scan-frontend\\app\\page.tsx"],m={require:t,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},55192:(e,s,t)=>{"use strict";t.d(s,{BT:()=>c,Wu:()=>o,ZB:()=>d,Zp:()=>l,aR:()=>i});var a=t(60687),r=t(43210),n=t(96241);let l=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border card-basic  text-card-foreground shadow-sm",e),...s}));l.displayName="Card";let i=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex card-header flex-col space-y-1.5 p-6",e),...s}));i.displayName="CardHeader";let d=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl card-title font-semibold leading-none tracking-tight",e),...s}));d.displayName="CardTitle";let c=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground card-description",e),...s}));c.displayName="CardDescription";let o=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0 card-content",e),...s}));o.displayName="CardContent",r.forwardRef(({className:e,...s},t)=>(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0 card-footer",e),...s})).displayName="CardFooter"},57769:(e,s,t)=>{"use strict";t.d(s,{k:()=>b});var a=t(60687),r=t(43210),n=t(11273),l=t(14163),i="Progress",[d,c]=(0,n.A)(i),[o,m]=d(i),x=r.forwardRef((e,s)=>{var t,r;let{__scopeProgress:n,value:i=null,max:d,getValueLabel:c=p,...m}=e;(d||0===d)&&!j(d)&&console.error((t=`${d}`,`Invalid prop \`max\` of value \`${t}\` supplied to \`Progress\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`));let x=j(d)?d:100;null===i||v(i,x)||console.error((r=`${i}`,`Invalid prop \`value\` of value \`${r}\` supplied to \`Progress\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`));let u=v(i,x)?i:null,h=g(u)?c(u,x):void 0;return(0,a.jsx)(o,{scope:n,value:u,max:x,children:(0,a.jsx)(l.sG.div,{"aria-valuemax":x,"aria-valuemin":0,"aria-valuenow":g(u)?u:void 0,"aria-valuetext":h,role:"progressbar","data-state":f(u,x),"data-value":u??void 0,"data-max":x,...m,ref:s})})});x.displayName=i;var u="ProgressIndicator",h=r.forwardRef((e,s)=>{let{__scopeProgress:t,...r}=e,n=m(u,t);return(0,a.jsx)(l.sG.div,{"data-state":f(n.value,n.max),"data-value":n.value??void 0,"data-max":n.max,...r,ref:s})});function p(e,s){return`${Math.round(e/s*100)}%`}function f(e,s){return null==e?"indeterminate":e===s?"complete":"loading"}function g(e){return"number"==typeof e}function j(e){return g(e)&&!isNaN(e)&&e>0}function v(e,s){return g(e)&&!isNaN(e)&&e<=s&&e>=0}h.displayName=u;var N=t(96241);let b=r.forwardRef(({className:e,value:s,...t},r)=>(0,a.jsx)(x,{ref:r,className:(0,N.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...t,children:(0,a.jsx)(h,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})}));b.displayName=x.displayName},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},90597:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\LINET\\\\Desktop\\\\PROJECTS\\\\MAMASCAN\\\\mama-scan-frontend\\\\app\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\LINET\\Desktop\\PROJECTS\\MAMASCAN\\mama-scan-frontend\\app\\page.tsx","default")},97992:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(62688).A)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},98492:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(62688).A)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])}};var s=require("../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[879,419],()=>t(50921));module.exports=a})();